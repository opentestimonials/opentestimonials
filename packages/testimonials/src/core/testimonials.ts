export type TestimonialsOptions = {
  collection: string;
  pathname?: string;
  preflight?: boolean;
  styles?: boolean;
};

export async function getTestimonials(options: TestimonialsOptions) {
  const { collection, ...rest } = options;
  const params = new URLSearchParams(rest as any);
  const url = new URL(
    `https://opentestimonials.com/api/embed/edge/${options.collection}`
  );
  url.search = params.toString();
  // `https://opentestimonials.com/api/embed/edge/${options.collection}` +
  // (options.pathname ? `?pathname=${options.pathname}` : '');
  return fetch(url)
    .then((r) => r.text())
    .then((html) => ({ hydrate: { html } }));
}
