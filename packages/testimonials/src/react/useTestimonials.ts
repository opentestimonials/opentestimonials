import { useEffect, useState } from 'react';
import { getTestimonials } from '../core/testimonials';
import { TestimonialsProps } from './Testimonials';

export function useTestimonials(props: TestimonialsProps) {
  const { hydrate, collection, pathname } = props;
  const [html, setHtml] = useState(hydrate?.html ?? '');
  useEffect(() => {
    if (!html && collection) {
      getTestimonials({
        collection,
        pathname,
      }).then((data) => setHtml(data.hydrate.html));
    }
  }, [props]);
  return { html };
}
