import { InferGetServerSidePropsType } from 'next';
import { env } from '../env.mjs';

export default function TestSSR(
  props: InferGetServerSidePropsType<typeof getServerSideProps>
) {
  return (
    <>
      {/* <Head>
        <link rel="stylesheet" href="/api/embed/styles.css" />
      </Head> */}
      <div dangerouslySetInnerHTML={{ __html: props.testimonialsHtml }} />
    </>
  );
}

export async function getServerSideProps() {
  // Fetch data from external API
  const res = await fetch(`${env.SERVER_URL}/api/embed/demo?styles=false`);
  // const res = await fetch(
  //   `https://opentestimonials.com/api/embed/demo?styles=false`
  // );
  const testimonialsHtml = await res.text();

  // Pass data to the page via props
  return { props: { testimonialsHtml } };
}
